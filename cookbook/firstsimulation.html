
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Running your first simulation &#8212; DTK Package 1.0 Beta 3 documentation</title>
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0 Beta 3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Creating a simple simulation" href="simulation.html" />
    <link rel="prev" title="Cookbook" href="../cookbook.html" />
  
   

  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="simulation.html" title="Creating a simple simulation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../cookbook.html" title="Cookbook"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">DTK Package 1.0 Beta 3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../cookbook.html" accesskey="U">Cookbook</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
        <a href="
    ../index.html" class="text-logo">dtk-tools Beta 1</a>
        
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dtk.html">dtk package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simtools.html">Simtools package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../calibtool.html">Calibtool package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../cookbook.html">Cookbook</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Running your first simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulation.html">Creating a simple simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="simplesweep.html">Creating a simple sweep</a></li>
<li class="toctree-l2"><a class="reference internal" href="caching.html">Caching Analyzer processing</a></li>
</ul>
</li>
</ul>

    
  </div>
</div>
        
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">Docs</a></li>
              
                <li><a href="../cookbook.html">Cookbook</a></li>
              
              <li>Running your first simulation</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="running-your-first-simulation">
<h1>Running your first simulation<a class="headerlink" href="#running-your-first-simulation" title="Permalink to this headline">¶</a></h1>
<p>dtk-tools is packaged with a lot of examples demonstrating the features of the tools.
You can find the examples in the <code class="docutils literal"><span class="pre">dtk-tools/examples</span></code> folder.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">We are recommending to not modify the examples directly in the dtk-tools folder but to copy the folder in your usual working directory and work from there.
That way you can always go back to the built-in examples if needed.</p>
</div>
<div class="section" id="running-example-sim">
<h2>Running example_sim<a class="headerlink" href="#running-example-sim" title="Permalink to this headline">¶</a></h2>
<p>From a command line where the tools are available, navigate to your newly copied examples folder:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">examples</span>
</pre></div>
</div>
<p>We will run the most basic simulation available in the <code class="docutils literal"><span class="pre">example_sim.py</span></code> script. To do so we will use the dtk command <a class="reference internal" href="../cli/dtk.html#dtk-cmd-run"><code class="xref std std-dtk-cmd docutils literal"><span class="pre">run</span></code></a> as follow:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dtk</span> <span class="n">run</span> <span class="n">example_sim</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>This command will create a simulation and send it to COMPS by default so you may be prompted to enter your COMPS credentials.
We can break the output returned by the command in different parts. The first part presents information about the experiment created:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="nt">&quot;command_line&quot;</span><span class="p">:</span> <span class="s2">&quot;Assets\\Eradication.exe --config config.json --input-path ./Assets&quot;</span><span class="p">,</span>
   <span class="nt">&quot;date_created&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-11-09 13:21:11.780551&quot;</span><span class="p">,</span>
   <span class="nt">&quot;dtk_tools_revision&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0b3&quot;</span><span class="p">,</span>
   <span class="nt">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s2">&quot;https://comps2.idmod.org&quot;</span><span class="p">,</span>
   <span class="nt">&quot;exp_id&quot;</span><span class="p">:</span> <span class="s2">&quot;2c664be8-93c5-e711-80c6-f0921c167864&quot;</span><span class="p">,</span>
   <span class="nt">&quot;exp_name&quot;</span><span class="p">:</span> <span class="s2">&quot;ExampleSim&quot;</span><span class="p">,</span>
   <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;ExampleSim_2c664be8-93c5-e711-80c6-f0921c167864&quot;</span><span class="p">,</span>
   <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="s2">&quot;HPC&quot;</span><span class="p">,</span>
   <span class="nt">&quot;selected_block&quot;</span><span class="p">:</span> <span class="s2">&quot;HPC&quot;</span><span class="p">,</span>
   <span class="nt">&quot;setup_overlay_file&quot;</span><span class="p">:</span> <span class="s2">&quot;c:\\Eradication\\examples\\simtools.ini&quot;</span><span class="p">,</span>
   <span class="nt">&quot;sim_root&quot;</span><span class="p">:</span> <span class="s2">&quot;$COMPS_PATH(USER)\\output&quot;</span><span class="p">,</span>
   <span class="nt">&quot;sim_type&quot;</span><span class="p">:</span> <span class="s2">&quot;VECTOR_SIM&quot;</span><span class="p">,</span>
   <span class="nt">&quot;working_directory&quot;</span><span class="p">:</span> <span class="s2">&quot;c:\\Eradication\\examples&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It shows you that the experiment was run on COMPS (<code class="docutils literal"><span class="pre">&quot;location&quot;:</span> <span class="pre">&quot;HPC&quot;</span></code>), but also other useful information like the id
of the newly created experiment (<code class="docutils literal"><span class="pre">&quot;exp_id&quot;:</span> <span class="pre">&quot;2c664be8-93c5-e711-80c6-f0921c167864&quot;</span></code>).</p>
<p>Following the experiment information, you will find the information about the simulations created in this experiment.
The <code class="docutils literal"><span class="pre">example_sim.py</span></code> example creates a single simulation but the tools are geared towards large experiments.</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">Creating the simulations (each . represent up to 20)</span>
<span class="go">| Creator processes: 1 (max: 16)</span>
<span class="go">| Simulations per batch: 20</span>
<span class="go">| Simulations Count: 1</span>
<span class="go">| Max simulations per threads: 20</span>
</pre></div>
</div>
<p>This tells us that the system created 1 simulation (<code class="docutils literal"><span class="pre">Simulation</span> <span class="pre">Count:</span> <span class="pre">1</span></code>) using 1 process (<code class="docutils literal"><span class="pre">Creator</span> <span class="pre">processes:</span> <span class="pre">1</span></code>).</p>
<p>The last part shows the tags associated to the simulations contained in the experiment that we just ran. Because
experiments can contain a lot of simulations, only the first few are shown and looks like:</p>
<div class="highlight-json"><div class="highlight"><pre><span></span><span class="p">[</span>
   <span class="p">{</span>
      <span class="nt">&quot;2d664be8-93c5-e711-80c6-f0921c167864&quot;</span><span class="p">:</span> <span class="p">{</span>
         <span class="nt">&quot;environment&quot;</span><span class="p">:</span> <span class="s2">&quot;Bayesian&quot;</span><span class="p">,</span>
         <span class="nt">&quot;exe_collection_id&quot;</span><span class="p">:</span> <span class="s2">&quot;ba726085-1fc3-e711-80c6-f0921c167864&quot;</span><span class="p">,</span>
         <span class="nt">&quot;input_collection_id&quot;</span><span class="p">:</span> <span class="s2">&quot;7fb0e472-8371-e711-80c1-f0921c167860&quot;</span>
      <span class="p">}</span>
   <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>This shows that we created the simulation with the id <code class="docutils literal"><span class="pre">2d664be8-93c5-e711-80c6-f0921c167864</span></code> and this simulation has
three tags:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">environment</span></code> with the value <code class="docutils literal"><span class="pre">Bayesian</span></code></li>
<li><code class="docutils literal"><span class="pre">exe_collection_id</span></code></li>
<li><code class="docutils literal"><span class="pre">input_collection_id</span></code></li>
</ul>
<p>More tags can be set on simulations as appropriate but this example is only keeping it to the tags automatically set
by the system.</p>
</div>
<div class="section" id="monitoring-status">
<h2>Monitoring status<a class="headerlink" href="#monitoring-status" title="Permalink to this headline">¶</a></h2>
<p>At this point the experiment is running. You can check its status by with the <a class="reference internal" href="../cli/dtk.html#dtk-cmd-status"><code class="xref std std-dtk-cmd docutils literal"><span class="pre">status</span></code></a> command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dtk</span> <span class="n">status</span>
</pre></div>
</div>
<p>This command assumes you are interested by the status of the latest ran experiment on your system and returns the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ExampleSim</span> <span class="p">(</span><span class="s1">&#39;2c664be8-93c5-e711-80c6-f0921c167864&#39;</span><span class="p">)</span> <span class="n">states</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">&quot;2d664be8-93c5-e711-80c6-f0921c167864&quot;</span><span class="p">:</span> <span class="s2">&quot;Running&quot;</span>
<span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;Running&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</pre></div>
</div>
<p>As you can see, our <code class="docutils literal"><span class="pre">ExampleSim</span></code> experiment, contains one <code class="docutils literal"><span class="pre">Running</span></code> simulation.
Let’s check for the status a few more time until we see:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ExampleSim</span> <span class="p">(</span><span class="s1">&#39;2c664be8-93c5-e711-80c6-f0921c167864&#39;</span><span class="p">)</span> <span class="n">states</span><span class="p">:</span>
<span class="p">{</span>
    <span class="s2">&quot;2d664be8-93c5-e711-80c6-f0921c167864&quot;</span><span class="p">:</span> <span class="s2">&quot;Succeeded&quot;</span>
<span class="p">}</span>
<span class="p">{</span><span class="s1">&#39;Succeeded&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
</pre></div>
</div>
<p>At this point our experiment has successfully completed.</p>
</div>
<div class="section" id="showing-graphs">
<h2>Showing graphs<a class="headerlink" href="#showing-graphs" title="Permalink to this headline">¶</a></h2>
<p>Now that our experiment completed successfully, it would be interesting to see some output graphs.
The <a class="reference internal" href="../cli/dtk.html#dtk-cmd-analyze"><code class="xref std std-dtk-cmd docutils literal"><span class="pre">analyze</span></code></a> command is here for this reason. The command can take different parameters including the
experiment id and which analyzer we want to use. For this example, we will use a built-in analyzer displaying time series from the <code class="docutils literal"><span class="pre">InsetChart.json</span></code> output file:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">dtk</span> <span class="n">analyze</span> <span class="o">-</span><span class="n">a</span> <span class="n">time_series</span>
</pre></div>
</div>
<p>Once again here, we did not specify any experiment id as we want to chart the most recent one.
This command should open a window showing the graphs.</p>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="../cookbook.html" title="previous chapter (use the left arrow)">Cookbook</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="simulation.html" title="next chapter (use the right arrow)">Creating a simple simulation</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="simulation.html" title="Creating a simple simulation"
             >next</a> |</li>
        <li class="right" >
          <a href="../cookbook.html" title="Cookbook"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">DTK Package 1.0 Beta 3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../cookbook.html" >Cookbook</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2018, Institute for Disease Modeling (IDM). Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>